<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í•™ê¸‰ ì²­ì†Œë‹¹ë²ˆ ì¶”ì²¨ê¸°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gradient-to-br from-blue-900 to-indigo-900 text-white min-h-screen flex items-center justify-center p-4">
  <div class="bg-white/10 backdrop-blur-md p-6 rounded-2xl shadow-lg w-full max-w-lg">
    <h1 class="text-3xl font-bold mb-2">í•™ê¸‰ ì²­ì†Œë‹¹ë²ˆ ì¶”ì²¨ê¸°</h1>
    <p class="text-gray-300 mb-4">1ë²ˆë¶€í„° 30ë²ˆ ì‚¬ì´ì—ì„œ <strong>ì¤‘ë³µ ì—†ì´</strong> ì›í•˜ëŠ” ì¸ì›ì„ ëœë¤ ì¶”ì²¨í•©ë‹ˆë‹¤.</p>

    <div class="row g-3 mb-4">
      <div class="col-md-6">
        <label class="form-label">ì‹œì‘ ë²ˆí˜¸</label>
        <input type="number" id="min" class="form-control" value="1" min="1">
      </div>
      <div class="col-md-6">
        <label class="form-label">ë ë²ˆí˜¸</label>
        <input type="number" id="max" class="form-control" value="30" min="1">
      </div>
      <div class="col-md-6">
        <label class="form-label">ë½‘ì„ ì¸ì› ìˆ˜</label>
        <input type="number" id="count" class="form-control" value="5" min="1">
      </div>
      <div class="col-md-6">
        <label class="form-label">ì œì™¸í•  ë²ˆí˜¸</label>
        <input type="text" id="exclude" class="form-control" placeholder="ì˜ˆ: 3, 7, 11">
      </div>
    </div>

    <div class="d-flex gap-2 mb-4">
      <button id="draw" class="btn btn-primary flex-1">ğŸ² ì¶”ì²¨í•˜ê¸°</button>
      <button id="reshuffle" class="btn btn-secondary flex-1">ğŸ” ë‹¤ì‹œ ì¶”ì²¨</button>
    </div>

    <div id="result" class="flex flex-wrap gap-2"></div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    let lastPool = [];

    function parseExclude(str){
      if(!str.trim()) return new Set();
      return new Set(str.split(/[^\d]+/).map(s=>s.trim()).filter(Boolean).map(Number));
    }

    function makePool(min, max, exclude){
      const pool = [];
      for(let n=min; n<=max; n++) if(!exclude.has(n)) pool.push(n);
      return pool;
    }

    function shuffle(arr){
      for(let i=arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function drawOnce(){
      const min = parseInt($("min").value);
      const max = parseInt($("max").value);
      const count = parseInt($("count").value);
      const exclude = parseExclude($("exclude").value);

      if(min>max){
        Swal.fire('ì˜¤ë¥˜','ì‹œì‘ ë²ˆí˜¸ê°€ ë ë²ˆí˜¸ë³´ë‹¤ í½ë‹ˆë‹¤.','error');
        return;
      }
      if(count<1){
        Swal.fire('ì˜¤ë¥˜','ë½‘ì„ ì¸ì› ìˆ˜ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.','error');
        return;
      }
      const pool = makePool(min, max, exclude);
      if(count>pool.length){
        Swal.fire('ì˜¤ë¥˜',`ë½‘ì„ ì¸ì› ìˆ˜(${count})ê°€ ê°€ëŠ¥í•œ ì¸ì› ìˆ˜(${pool.length})ë³´ë‹¤ ë§ìŠµë‹ˆë‹¤.`,'error');
        return;
      }

      lastPool = [...pool];
      shuffle(pool);
      const picked = pool.slice(0,count).sort((a,b)=>a-b);
      displayResult(picked);
      Swal.fire('ì¶”ì²¨ ì™„ë£Œ',`ì¶”ì²¨ëœ ë²ˆí˜¸: ${picked.join(', ')}`,'success');
    }

    function reshuffle(){
      if(!lastPool.length){
        drawOnce();
        return;
      }
      const count = parseInt($("count").value);
      const pool = [...lastPool];
      shuffle(pool);
      const picked = pool.slice(0,count).sort((a,b)=>a-b);
      displayResult(picked);
      Swal.fire('ë‹¤ì‹œ ì¶”ì²¨ ì™„ë£Œ',`ìƒˆ ë²ˆí˜¸: ${picked.join(', ')}`,'success');
    }

    function displayResult(numbers){
      const result = $("result");
      result.innerHTML = '';
      numbers.forEach(num => {
        const div = document.createElement('div');
        div.className = 'px-4 py-2 bg-indigo-600 rounded-full font-bold text-lg shadow-md';
        div.textContent = num;
        result.appendChild(div);
      });
    }

    $("draw").addEventListener('click', drawOnce);
    $("reshuffle").addEventListener('click', reshuffle);
  </script>
</body>
</html>
